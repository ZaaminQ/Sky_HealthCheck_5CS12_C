{% extends 'core/base.html' %}
{% block title %}Vote Summary{% endblock %}
{% block content %}
  <h2>Your Vote Summary</h2>
  <form method="get" class="form-inline">
    <label for="session">Select Session:</label>
    <select name="session" onchange="this.form.submit()">
      <option value="">-- choose session --</option>
      {% for s in sessions %}
        <option value="{{ s.id }}" {% if s.id|stringformat:"s" == selected_session %}selected{% endif %}>{{ s }}</option>
      {% endfor %}
    </select>
  </form>

  {% if votes %}
    <table class="summary-table">
      <thead>
        <tr>
          <th>Card</th><th>Your Vote</th><th>Progress</th>
        </tr>
      </thead>
      <tbody>
        {% for v in votes %}
          <tr>
            <td>{{ v.card.title }}</td>
            <td class="vote-{{ v.vote }}">{{ v.get_vote_display }}</td>
            <td>{{ v.progress_better|yesno:"Yes,No" }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    {% if selected_session %}
      <p>No votes found for this session.</p>
    {% endif %}
  {% endif %}
{% endblock %}
